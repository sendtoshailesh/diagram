<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P5.js Generative Art</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #1a1a1a;
            font-family: Arial, sans-serif;
            color: white;
        }
        h1 {
            margin-bottom: 20px;
        }
        .controls {
            margin: 20px;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
            background: #4ECDC4;
            border: none;
            color: white;
            border-radius: 4px;
        }
        button:hover {
            background: #45B7D1;
        }
    </style>
</head>
<body>
    <h1>P5.js Generative Art & Visualization</h1>
    <div class="controls">
        <button onclick="changePattern('spiral')">Spiral</button>
        <button onclick="changePattern('particles')">Particles</button>
        <button onclick="changePattern('waves')">Waves</button>
        <button onclick="changePattern('grid')">Grid</button>
        <button onclick="saveCanvas()">Save Image</button>
    </div>

    <script>
        let pattern = 'spiral';
        let particles = [];
        let angle = 0;

        function setup() {
            createCanvas(800, 600);
            colorMode(HSB, 360, 100, 100, 100);
            
            // Initialize particles
            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: random(width),
                    y: random(height),
                    vx: random(-2, 2),
                    vy: random(-2, 2),
                    size: random(3, 8),
                    hue: random(360)
                });
            }
        }

        function draw() {
            background(0, 0, 10, 10);
            
            switch(pattern) {
                case 'spiral':
                    drawSpiral();
                    break;
                case 'particles':
                    drawParticles();
                    break;
                case 'waves':
                    drawWaves();
                    break;
                case 'grid':
                    drawGrid();
                    break;
            }
            
            angle += 0.02;
        }

        function drawSpiral() {
            translate(width / 2, height / 2);
            
            for (let i = 0; i < 200; i++) {
                let a = angle + i * 0.1;
                let r = i * 2;
                let x = cos(a) * r;
                let y = sin(a) * r;
                
                let hue = (i * 2 + frameCount) % 360;
                fill(hue, 80, 90, 50);
                noStroke();
                circle(x, y, 10);
            }
            
            resetMatrix();
        }

        function drawParticles() {
            particles.forEach(p => {
                // Update position
                p.x += p.vx;
                p.y += p.vy;
                
                // Bounce off edges
                if (p.x < 0 || p.x > width) p.vx *= -1;
                if (p.y < 0 || p.y > height) p.vy *= -1;
                
                // Draw particle
                fill(p.hue, 80, 90, 80);
                noStroke();
                circle(p.x, p.y, p.size);
                
                // Draw connections
                particles.forEach(other => {
                    let d = dist(p.x, p.y, other.x, other.y);
                    if (d < 100) {
                        stroke(p.hue, 60, 70, map(d, 0, 100, 30, 0));
                        strokeWeight(1);
                        line(p.x, p.y, other.x, other.y);
                    }
                });
            });
        }

        function drawWaves() {
            noFill();
            
            for (let y = 0; y < height; y += 20) {
                beginShape();
                for (let x = 0; x < width; x += 10) {
                    let wave1 = sin(x * 0.01 + angle + y * 0.01) * 30;
                    let wave2 = cos(x * 0.02 - angle) * 20;
                    let yPos = y + wave1 + wave2;
                    
                    let hue = (x + y + frameCount) % 360;
                    stroke(hue, 80, 90, 60);
                    strokeWeight(2);
                    vertex(x, yPos);
                }
                endShape();
            }
        }

        function drawGrid() {
            let cols = 20;
            let rows = 15;
            let cellWidth = width / cols;
            let cellHeight = height / rows;
            
            for (let i = 0; i < cols; i++) {
                for (let j = 0; j < rows; j++) {
                    let x = i * cellWidth;
                    let y = j * cellHeight;
                    
                    let size = sin(angle + i * 0.5 + j * 0.5) * 20 + 25;
                    let hue = (i * 15 + j * 15 + frameCount) % 360;
                    
                    fill(hue, 80, 90, 70);
                    noStroke();
                    
                    push();
                    translate(x + cellWidth / 2, y + cellHeight / 2);
                    rotate(angle + i * 0.1);
                    rectMode(CENTER);
                    rect(0, 0, size, size);
                    pop();
                }
            }
        }

        function changePattern(newPattern) {
            pattern = newPattern;
            background(0, 0, 10);
        }

        function saveCanvas() {
            save('generative-art.png');
        }

        // Mouse interaction
        function mouseMoved() {
            if (pattern === 'particles') {
                particles.forEach(p => {
                    let d = dist(mouseX, mouseY, p.x, p.y);
                    if (d < 100) {
                        p.vx += (p.x - mouseX) * 0.001;
                        p.vy += (p.y - mouseY) * 0.001;
                    }
                });
            }
        }
    </script>
</body>
</html>
